<% if @ar %>

    var player;
    var playerJSArray = <%=raw @ar%>;
    
    
$(document).on('turbolinks:load', function() {    
    if(document.getElementById('iframe_api') === null){
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        runPlayers();
    }
    else
        runPlayers();
});

    function onYouTubeIframeAPIReady() {
        runPlayers();
    }
    
    
    function runPlayers(){
        var i = 1;
        for(var i = 0; i < playerJSArray.length; i = i+2) {
            
            player = new YT.Player('player'+playerJSArray[i], {
            width: '100%',
            videoId: playerJSArray[i+1],
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
                }
            });
        }
    }

    function onPlayerReady(event) {
        
    }
    
    function onPlayerStateChange(event) {
        
    }

<% end %>
